<!DOCTYPE html>
<html lang="en">

<!-- begin::Head -->
<head>
    <meta charset="utf-8" />
    <title>Ecuafact | @ViewBag.Title</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Administra todas tus facturas electrónicas en un solo lugar. Disponible para Android, IOS y Web" />
    <meta name="author" content="ECUANEXUS - Líderes en la Facturacion Electronica del Ecuador" />
    <meta name="title" content="ECUAFACT, firma electronica, ecuanexus, facturacion electronica ecuador, factura electronica SRI, factura digital" />
    <meta name="keywords" content="sri linea, sri en linea, sri ruc, ruc, consulta sri, sri ecuador, matricula sri, consulta ruc sri, multas sri, consulta ruc, consulta de deudas sri, sri consulta en linea, sri deudas, sri consulta de ruc, SRI matriculacion, declaraciones sri,ECUAFACT,factura electronica,facturas SRI, Android, IOS ,Iphone,Ecuanexus,SRI, facturas electronicas,Proveedor Facturacion Electronica, factura digital, factura electronica ecuador, facturas electronicas sri, documentos digitales,Facturacion,Electronica,Ecuador,ERP" />

    <!-- OG Meta Tags to improve the way the post looks when you share the page on LinkedIn, Facebook, Google+-->
    <meta property="og:site_name" content="Ecuafact" /> <!-- website name -->
    <meta property="og:site" content="app.ecuafact.com" /> <!-- website link -->
    <meta property="og:title" content="Ecuafact - Todas tus facturas en un solo lugar" /> <!-- title shown in the actual shared post -->
    <meta property="og:description" content="Con ECUAFACT recibe y administra todas tus facturas electrónicas en un solo lugar. Disponible para Android, IOS y Web" /> <!-- description shown in the actual shared post -->
    <meta property="og:image" content="@Url.Content("~/images/banner-ecuafact-2019.jpeg")" /> <!-- image link, make sure it's jpg -->
    <meta property="og:url" content="https://app.ecuafact.com" /> <!-- where do you want your post to link to -->
    <meta property="og:type" content="article" />

    <link rel="author" href="http://www.ecuanexus.com" />
    <link rel="publisher" href="http://www.ecuafact.com" />

    @**

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.google-analytics.com/analytics.js"></script>
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-66553421-2"></script>
        <script async>
            window.dataLayer = window.dataLayer || [];
            function gtag() { dataLayer.push(arguments); }
            gtag('js', new Date());
            gtag('config', 'UA-66553421-2');
        </script>
        <!-- End Global site tag (gtag.js) - Google Analytics -->
        <!-- Facebook Pixel Code -->
        <script async src="https://connect.facebook.net/en_US/fbevents.js"></script>
        <script async src="https://connect.facebook.net/signals/config/502287560709781?v=2.9.5&amp;r=stable"></script>
        <script async>
            !function (f, b, e, v, n, t, s) {
                if (f.fbq) return; n = f.fbq = function () {
                    n.callMethod ?
                        n.callMethod.apply(n, arguments) : n.queue.push(arguments)
                };
                if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
                n.queue = []; t = b.createElement(e); t.async = !0;
                t.src = v; s = b.getElementsByTagName(e)[0];
                s.parentNode.insertBefore(t, s)
            }(window, document, 'script',
                'https://connect.facebook.net/en_US/fbevents.js');
            fbq('init', '502287560709781');
            fbq('track', 'PageView');
        </script>
        <noscript>
            <img height="1" width="1" src="https://www.facebook.com/tr?id=502287560709781&ev=PageView&noscript=1" />
        </noscript>
        <!-- End Facebook Pixel Code -->
    *@


    <!--begin::Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700|Roboto:300,400,500,600,700">
    <!--end::Fonts -->
    <!--begin::Page Vendors Styles(used by this page) -->
    <!--end::Page Vendors Styles -->
    <!--begin::Global Theme Styles(used by all pages) -->
    <!--begin:: Vendor Plugins -->
    @Styles.Render("~/css/plugins",
        "~/css/fonts/socicon",
        "~/css/fonts/line-awesome",
        "~/css/fonts/flaticon",
        "~/css/fonts/flaticon2",
        "~/css/fonts/fontawesome",
        "~/css/jqueryui")

    @Styles.Render("~/css/inputmask")
    <!--end:: Vendor Plugins -->

    @if (this.GetOption(m => m.DatePicker))
    {
        @Styles.Render("~/css/datepicker")
    }
    @if (this.GetOption(m => m.DateRangePicker))
    {
        @Styles.Render("~/css/daterangepicker")
    }
    @if (this.GetOption(m => m.DropZone))
    {
        @Styles.Render("~/css/dropzone")
    }
    @if (this.GetOption(m => m.Select2))
    {
        @Styles.Render("~/css/select2")
    }
    @if (this.GetOption(m => m.Charts))
    {
        @Styles.Render("~/css/charts")
    }
    <!--begin:: Vendor Plugins for custom pages -->

    @if (this.GetOption(m => m.FullCalendar))
    {
        @Styles.Render("~/css/fullcalendar")
    }
    @if (this.GetOption(m => m.DataTables))
    {
        @Styles.Render("~/css/datatables")
    }
    @if (this.GetOption(m => m.JsTree))
    {
        @Styles.Render("~/css/jstree")
    }
    @if (this.GetOption(m => m.Maps))
    {
        @Styles.Render("~/css/maps")
    }

    <!--end:: Vendor Plugins for custom pages -->
    <!--end:: Global Theme Styles -->
    <!--begin::Layout Skins(used by all pages) -->
    @Styles.Render("~/css/site")
    <!--end::Layout Skins -->

    <link rel="shortcut icon" href="~/favicon.ico" />

    @RenderSection("Styles", false)

    @Scripts.Render("~/js/jquery")
</head>

<!-- end::Head -->
<!-- begin::Body -->
<body class="kt-quick-panel--right kt-demo-panel--right kt-offcanvas-panel--right kt-header--fixed kt-header-mobile--fixed   kt-subheader--enabled kt-subheader--solid kt-aside--enabled kt-aside--fixed kt-aside--minimize kt-page--loading">

    <!-- begin:: Page -->
    <div id="kt_header_mobile" class="kt-header-mobile  kt-header-mobile--fixed " style="background-color: #243356;background-size: cover;background-repeat: no-repeat; background-image:url(@Url.Content("~/images/bg-purple.png"));">
        @*<div class="kt-header-mobile__logo" style="background:#00ABE5;width:60px;text-align: center;">
                <a href="~/" style="display: block; margin: auto;">
                    <img alt="Logo" src="~/Images/logo_white_vertical.png" style="max-width: 80%;text-align: center;">
                </a>

            </div>*@
        <div class="kt-header-mobile__logo">
            <a href="~/">
                <img alt="Logo" src="~/Images/ecuafact_logo_transparent.svg" height="35">
            </a>

        </div>
        <div class="kt-header-mobile__toolbar">
            <div class="kt-header-mobile__toolbar-toggler kt-header-mobile__toolbar-toggler--left" id="kt_aside_mobile_toggler"><span></span></div>
            <div class="kt-header-mobile__toolbar-topbar-toggler" id="kt_header_mobile_topbar_toggler"><i class="flaticon-more"></i></div>
        </div>
    </div>

    <div class="kt-grid kt-grid--hor kt-grid--root">
        <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--ver kt-page">

            @if (SessionInfo.UserInfo != null) { Html.RenderPartial("template/_aside/base"); }

            <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor kt-wrapper" id="kt_wrapper">

                <!-- begin:: Header -->
                <div id="kt_header" class="kt-header kt-grid kt-grid--ver  kt-header--fixed " style="background-size: cover;background-repeat: no-repeat; background-image:url(@Url.Content("~/images/bg-purple.png"));">

                    <!-- begin:: Aside -->
                    @*<div class="kt-header__brand kt-grid__item  " id="kt_header_brand">
                            <div class="kt-header__brand-logo" style="text-align: center;">
                                <a href="~/">
                                    <img alt="Logo" src="~/Images/logo_white_vertical.png" style="max-width: 100%;text-align: center;">
                                </a>
                            </div>
                        </div>*@

                    <!-- end:: Aside -->
                    <!-- begin:: Title -->
                    <h3 class="kt-header__title kt-grid__item">
                        <a href="~/">
                            <img alt="Logo" src="~/Images/ecuafact_logo_transparent.svg" height="45" width="200" style="max-height: 80px;">
                        </a>

                        @*ECUAFACT - Facturaci&oacute;n Electr&oacute;nica*@
                    </h3>

                    <!-- end:: Title -->
                    <!-- begin:: Header Topbar -->
                    <div class="kt-header__topbar">


                        @if (SessionInfo.UserInfo != null)
                        {
                            Html.RenderPartial("template/_user-bar");
                        }

                        <!--begin: Quick panel toggler -->
                        @*<div class="kt-header__topbar-item kt-header__topbar-item--quickpanel" data-toggle="kt-tooltip" title="Quick panel" data-placement="top">
                                <div class="kt-header__topbar-wrapper">
                                    <span class="kt-header__topbar-icon" id="kt_quick_panel_toggler_btn"><i class="flaticon2-cube-1"></i></span>
                                </div>
                            </div>*@

                        <!--end: Quick panel toggler -->
                    </div>

                    <!-- end:: Header Topbar -->
                </div>
                <!-- end:: Header -->

                <div class="kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor" id="kt_content">
                    <!-- begin:: Content Head -->
                    <div class="kt-subheader  kt-grid__item" id="kt_subheader">
                        <div class="kt-container  kt-container--fluid ">
                            <div class="kt-subheader__main">
                                @if (SessionInfo.UserInfo != null)
                                {
                                    <h3 class="kt-subheader__title">@ViewBag.Title</h3>
                                    <span class="kt-subheader__separator kt-subheader__separator--v"></span>
                                    <span class="kt-subheader__desc kt-font-bold text-uppercase">
                                        <a class="btn btn-pill btn-outline-hover-primary" href="~/Carrier/Emisor/Configuracion">
                                            &nbsp;
                                            @if (SessionInfo.Issuer != null)
                                            {
                                                var pending = 0;

                                                <span class="text-primary" title="Información del RUC">
                                                    @(string.Format("{0} - {1}", SessionInfo.Issuer.RUC, SessionInfo.Issuer.BussinesName))&nbsp;&nbsp;

                                                    @if (string.IsNullOrEmpty(SessionInfo.Issuer.Phone) || string.IsNullOrEmpty(SessionInfo.Issuer.Email) || string.IsNullOrEmpty(SessionInfo.Issuer.MainAddress))
                                                    {
                                                        pending += 1;
                                                    }

                                                    @if (SessionInfo.Issuer.Establishments.Count() > 0)
                                                    {
                                                        SessionInfo.Issuer.Establishments?.ForEach(s =>
                                                        {
                                                            if (string.IsNullOrEmpty(s.Code) || string.IsNullOrEmpty(s.Address) || string.IsNullOrEmpty(s.Name)) { pending += 1; }
                                                            s.IssuePoint?.ForEach(p => { if (string.IsNullOrEmpty(p.Code)) { pending += 1; } });

                                                        });
                                                    }

                                                    @*@if (string.IsNullOrEmpty(SessionInfo.Issuer.EstablishmentCode) || string.IsNullOrEmpty(SessionInfo.Issuer.EstablishmentAddress) || string.IsNullOrEmpty(SessionInfo.Issuer.IssuePointCode))
                                                        {
                                                            pending += 1;
                                                        }*@

                                                    @if (string.IsNullOrEmpty(SessionInfo.Issuer.Certificate) || string.IsNullOrEmpty(SessionInfo.Issuer.CertificatePass))
                                                    {
                                                        pending += 1;
                                                    }

                                                    @if (pending > 0)
                                                    {
                                                        <span class="kt-badge kt-badge--danger">&nbsp; @pending &nbsp;</span>
                                                    }
                                                    else
                                                    {
                                                        <span class="text-success">&nbsp; <i class="fa fa-check-circle"></i> &nbsp;</span>
                                                    }

                                                </span>
                                            }
                                            &nbsp;
                                        </a>
                                    </span>
                                }
                            </div>
                            <div class="kt-subheader__toolbar">
                                <div class="kt-subheader__wrapper">
                                    @RenderSection("toolbar", false)


                                    @if (this.GetOption(m => m.DateRangeTool))
                                    {

                                        <a href="javascript:;" class="btn kt-subheader__btn-daterange" id="kt_dashboard_daterangepicker" data-toggle="kt-tooltip" title="Seleccionar un rango de fechas" data-placement="left">
                                            <span class="kt-subheader__btn-daterange-title" id="kt_dashboard_daterangepicker_title"></span>&nbsp;
                                            <span class="kt-subheader__btn-daterange-date" id="kt_dashboard_daterangepicker_date"></span>
                                            <i class="flaticon2-calendar-1"></i>
                                        </a>

                                        <a href="javascript:;" class="btn btn-primary refresh sbold hidden-print btn-sm" title="Volver a cargar">
                                            <i class='flaticon2-refresh-button'></i>
                                        </a>
                                    }


                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- end:: Content Head -->
                    <!-- begin:: Content -->
                    <div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid" style="height:320px; overflow:auto;">
                        @RenderBody()
                    </div>

                    <!-- end:: Content -->
                </div>

                <!-- begin:: Footer -->
                <div class="kt-footer  kt-grid__item kt-grid kt-grid--desktop kt-grid--ver-desktop" id="kt_footer">
                    <div class="kt-container  kt-container--fluid ">
                        <div class="kt-footer__copyright">
                            2019&nbsp;&copy;&nbsp;<a href="http://ecuanexus.com" target="_blank" class="kt-link">Ecuanexus-IT</a>
                        </div>
                        <div class="kt-footer__menu">
                            <a href="@Url.Content("~/docs/disclaimer.pdf")" target="_privacy" class="kt-footer__menu-link kt-link">Privacidad</a> &nbsp;&nbsp;
                            <a href="https://soporte.ecuafact.com/" class="kt-footer__menu-link kt-link" target="_support">Soporte</a> &nbsp;&nbsp;
                            <a href="https://www.ecuafact.com/contacto/" class="kt-footer__menu-link kt-link" target="_contact">Cont&aacute;ctenos</a>
                        </div>
                        <div class="kt-footer__menu"></div>
                    </div>
                </div>
                <!-- end:: Footer -->
            </div>
        </div>
    </div>

    <!-- end:: Page -->

    @{ Html.RenderPartial("template/_quick-panel"); }


    <!-- begin::Scrolltop -->
    <div id="kt_scrolltop" class="kt-scrolltop">
        <i class="fa fa-arrow-up"></i>
    </div>
    <!-- end::Scrolltop -->


    <div id="myModal" class="modal fade" aria-hidden="true">
        <div class="col-xs-12" style="text-align:center;"><img src="~/Images/ripple_white.gif" /></div>
    </div>

    <div class="loaderV1">
        <img src="@Url.Content("~/Images/ecuafactLogo.png")" />
        <div class="loaderV1Text"></div>
    </div>

    @*<script>
            window.fwSettings = { 'widget_id': 77000001879 };
            !function () { if ("function" != typeof window.FreshworksWidget) { var n = function () { n.q.push(arguments) }; n.q = [], window.FreshworksWidget = n } }()
        </script>
        <script type='text/javascript' src='https://euc-widget.freshworks.com/widgets/77000001879.js' async defer></script>*@
    <script data-jsd-embedded data-key="c5d9318e-5808-4186-835e-c403d30f989e" data-base-url="https://jsd-widget.atlassian.com" src="https://jsd-widget.atlassian.com/assets/embed.js"></script>

    <!-- begin::Global Config(global config for global JS sciprts) -->
    <script>
        var KTAppOptions = {
            "colors": {
                "state": {
                    "brand": "#22b9ff",
                    "light": "#ffffff",
                    "light": "#282a3c",
                    "primary": "#5867dd",
                    "success": "#34bfa3",
                    "info": "#36a3f7",
                    "warning": "#ffb822",
                    "danger": "#fd3995"
                },
                "base": {
                    "label": ["#c5cbe3", "#a1a8c3", "#3d4465", "#3e4466"],
                    "shape": ["#f0f3ff", "#d9dffa", "#afb4d4", "#646c9a"]
                }
            }
        };
    </script>

    <!-- end::Global Config -->
    <!--begin::Global Theme Bundle(used by all pages) -->
    <!--begin:: Vendor Plugins -->
    @Scripts.Render("~/js/vendor")
    @if (this.GetOption(m => m.DatePicker))
    {
        @Scripts.Render("~/js/datepicker")
    }
    @if (this.GetOption(m => m.DateRangePicker))
    {
        @Scripts.Render("~/js/daterangepicker")
    }
    @if (this.GetOption(m => m.Select2))
    {
        @Scripts.Render("~/js/select2")
    }
    @if (this.GetOption(m => m.DropZone))
    {
        @Scripts.Render("~/js/dropzone")
    }

    @Scripts.Render("~/js/inputmask")

    @if (this.GetOption(m => m.RichTextEditor))
    {
        @Scripts.Render("~/js/richtexteditor")
    }
    @if (this.GetOption(m => m.Charts))
    {
        @Scripts.Render("~/js/charts")
    }
    @Scripts.Render("~/js/plugins")
    <!--end:: Vendor Plugins -->
    <!--begin:: Vendor Plugins for custom pages -->
    @Scripts.Render("~/js/jqueryui")

    @if (this.GetOption(m => m.FullCalendar))
    {
        @Scripts.Render("~/js/fullcalendar")
    }
    @if (this.GetOption(m => m.Flot))
    {
        @Scripts.Render("~/js/jquery.flot")
    }
    @if (this.GetOption(m => m.DataTables))
    {
        @Scripts.Render("~/js/datatables.net")
    }
    @if (this.GetOption(m => m.JsTree))
    {
        @Scripts.Render("~/js/jstree")
    }
    @if (this.GetOption(m => m.Maps))
    {
        @Scripts.Render("~/js/maps")
    }

    <!--end:: Vendor Plugins for custom pages -->
    <!--end::Global Theme Bundle -->
    <!--begin::Page Vendors(used by this page) -->
    <!--end::Page Vendors -->
    <!--begin::Page Scripts(used by this page) -->
    @Scripts.Render("~/js/layout")
    @Scripts.Render("~/js/contributors")

    <script id="mainScripts">

    $(function () { $('[data-toggle="tooltip"]').tooltip() });

    window.urlLogin = "@Url.Action("Carrier","Auth")";

    window.crearEstablecimiento = function () {
        showModal("@Url.Action("CrearEstablecimiento", "Establishment")");
    }

    window.crearPuntoEmision= function (id) {
        showModal("@Url.Action("Crear", "IssuePoint")?establishmentId=" + id);
    }

    window.logOff = function () {
        showLoader();
        $.post("@Url.Action("LogOffC", "Auth")", function (data) {
            hideLoader();

            if (data.id == 0) {
                window.location.href = "@Url.Action("Carrier", "Auth")?returnUrl=" + location.pathname;
            }
            else if (typeof data == "string") {
                Swal.fire("Iniciar Sesión", "Cerrando la sesión!", "warning");
                window.location.href = "@Url.Action("Carrier", "Auth")?returnUrl=" + location.pathname;
            }
            else {
                Swal.fire("Error", "No se pudo procesar su cerrar la sesión!", "error");
            }
        });

    }

    window.changeIssuer = function (issuerRUC) {
        showLoader();
        if (issuerRUC) {
            var url = '@Url.Action("Carrier", "Auth")/' + issuerRUC;

            $.get(url, function (data) {
                location.reload();
            })
                .always(function () {
                    // hideLoader();
                });
        }
    }

    moment.locale('es');

    </script>


    @{
        // Control de alertas internas. Cuando un proceso lo genera.
        var alert = SessionInfo.Alert.GetAlert();
        if (alert != null)
        {
            <!--BEGIN SWEETALERT-->
            <script id='alerts'>
                toastr['@alert.BoxType'](`@Html.Raw(alert.Message)`);
            </script>
            <!--END SWEETALERT-->
        }


        foreach (var item in SessionInfo.Notifications.Unread)
        {
            <script id="notifications_@item.CreatedOn.ToOADate().ToString()">
                toastr['@item.BoxType'](`@Html.Encode(item.Message)`);
            </script>

            item.Unread = false;
        }


    }

    <!--end::Page Scripts -->
    @RenderSection("Scripts", false)
</body>

<!-- end::Body -->
</html>
