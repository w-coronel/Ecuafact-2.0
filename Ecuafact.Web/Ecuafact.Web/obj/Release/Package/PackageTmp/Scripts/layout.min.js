function formatNumDAU(n){var f,t,i,r,u;return n=n&&n!==null?n.replace(/\D/g,""):"0",f=n.match(/^(\d{0,3})(\d{0,4})(\d{0,2})(\d{0,8})$/),f&&(t=f[1],t&&t!==null||(t="0"),i=f[2],i&&i!==null||(i="0"),r=f[3],r&&r!==null||(r="0"),u=f[4],u&&u!==null||(u="0"),t=t.padStart(3,"0"),i=i.padStart(4,"0"),r=r.padStart(2,"0"),u=u.padStart(8,"0"),n=t+"-"+i+"-"+r+"-"+u),n}function formatPlate(n){var r,t,i;return n&&n!==null?(n=n.replace(/\W/g,""),n=n.toUpperCase()):n="",r=n.match(/^(\w{0,3})(\d{0,4})$/),r&&(t=r[1],t&&t!==null&&(t=t.padEnd(3,"X")),i=r[2],i&&i!==null&&(i=i.padStart(4,"0")),n=t+"-"+i),n}function formatDateColumn(n,t){return n&&typeof n!="undefined"&&(t==="display"||t==="filter")?n.toLocaleDateString():n}function formatDateColumnII(n){if(n===null)return"";var i=/Date\(([^)]+)\)/.exec(n),t=new Date(parseFloat(i[1]));return t.getFullYear()===9999?"":t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()}function formatPercentageColumn(n,t){return n&&typeof n!="undefined"&&(t==="display"||t==="filter")?n+" %":n}function initControls(){window.location.hash="no-back-button";window.location.hash="Again-No-back-button";window.onhashchange=function(){window.location.hash=""}}var validarCedula=function(n){var n,e,f,t,i,r,u,o;if(!n)return!1;if(n=n.trim(),n.length==10){if(e=n.substring(0,2),e>=1&&e<=24){var h=n.substring(9,10),c=parseInt(n.substring(1,2))+parseInt(n.substring(3,4))+parseInt(n.substring(5,6))+parseInt(n.substring(7,8)),f=n.substring(0,1),f=f*2;f>9&&(f=f-9);t=n.substring(2,3);t=t*2;t>9&&(t=t-9);i=n.substring(4,5);i=i*2;i>9&&(i=i-9);r=n.substring(6,7);r=r*2;r>9&&(r=r-9);u=n.substring(8,9);u=u*2;u>9&&(u=u-9);var l=f+t+i+r+u,s=c+l,a=String(s).substring(0,1),v=(parseInt(a)+1)*10,o=v-s;return o==10&&(o=0),o==h?!0:!1}return!1}return!1},validarRUCNatural=function(n){if(!n||n.length!=13)return!1;var t=n.substring(0,10);return validarCedula(t)},validarEmail=function(n){return/^((([a-zA-Z\-0-9\._]+@)([a-zA-Z\-0-9\.]+)[;, ]*)+)$/.test(n)?!0:!1},validarTelefono=function(n){return/^\d*(?:(,?;? ?\/?\|?-?)\d?)*$/.test(n)?!0:!1},isTrue=function(n){return typeof n=="boolean"?n:n=="true"||n==1},formatNumDoc;$.validator&&($.validator.addMethod("multiplePhone",function(n){return n?validarTelefono(n.trim()):!0}),$.validator.addMethod("multipleEmail",function(n){return n?validarEmail(n.trim()):!0}),$.validator.addMethod("onlyNumbers",function(n){return n?/^[0-9\s]+$/.test(n):!0}),$.validator.addMethod("onlyLetters",function(n){return n?/^[A-Za-zÑñÜü\s]+$/.test(n):!0}),$.validator.addMethod("onlyWords",function(n){return n?(valueSplit=n.split(" "),/^[A-Za-z0-9ÑñÜü(),.\s]+$/.test(n)&&valueSplit.length>1):!0}),$.validator.addMethod("fileSize",function(n,t,i){if(this.optional(t))return!0;if(t&&t.files&&t.files.length>0){var r=t.files[0].size/1024;if(r/1024>1&&(r=Math.round(r/1024*100)/100,r>i))return!1}else return!1;return!0},"Disminuya el tamaño del archivo (máx {0} MB)"),$.extend($.validator.messages,{required:"Este campo es obligatorio.",remote:"Por favor, rellena este campo.",email:"Por favor, escribe una dirección de correo válida",url:"Por favor, escribe una URL válida.",date:"Por favor, escribe una fecha válida.",dateISO:"Por favor, escribe una fecha (ISO) válida.",number:"Por favor, escribe un número entero válido.",digits:"Por favor, escribe sólo dígitos.",creditcard:"Por favor, escribe un número de tarjeta válido.",equalTo:"Por favor, escribe el mismo valor de nuevo.",accept:"Por favor, seleccione un archivo del tipo, formato o extensión permitida.",maxlength:$.validator.format("Por favor, no escribas más de {0} caracteres."),minlength:$.validator.format("Por favor, no escribas menos de {0} caracteres."),rangelength:$.validator.format("Por favor, escribe un valor entre {0} y {1} caracteres."),range:$.validator.format("Por favor, escribe un valor entre {0} y {1}."),max:$.validator.format("Por favor, escribe un valor menor o igual a {0}."),min:$.validator.format("Por favor, escribe un valor mayor o igual a {0}."),step:$.validator.format("Por favor, escribe un multiplo de {0}."),tel:"Por favor, escribe un número de teléfono válido.",multiplePhone:"Por favor, escribe un número de teléfono válido.",multipleEmail:"Por favor, escribe una dirección de correo válido.",onlyNumbers:"Por favor, escribe sólo números.",onlyLetters:"Por favor, escribe sólo letras."}));moment&&moment().locale&&moment().locale("es");var showDisabledMsg=function(){Swal.fire("No Disponible","Esta opcion no esta disponible.\nSe requiere que usted configure su cuenta para la Emisión de Documentos Electrónicos.\n[ Sistema > Configuracion > Emisión ]","warning")},refreshMethod=function(){},searchMethod=function(){},dateFromJson=function(n){if(n){if(typeof n=="string"){var t=n.replace("/Date(","");return t=t.replace(")/",""),t=parseFloat(t),new Date(t)}if(typeof n=="number")return new Date(n)}return n};$.fn.datepicker&&($.fn.datepicker.dates.es={days:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],daysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],daysMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],today:"Hoy",clear:"Limpiar",format:"dd/mm/yyyy",titleFormat:"MM yyyy",weekStart:0});formatNumDoc=function(n){var t,i;return n=n!==null?n.replace(/\D/g,""):"",console.log(n),t=n.match(/^(\d{3})(\d{3})(\d{0,15})$/),t?(i=t[3],i!==null&&(i*1==0&&(i="1"),i=i.padStart(9,"0")),t[1]=="000"&&(t[1]="001"),t[2]=="000"&&(t[2]="001"),n=t[1]+"-"+t[2]+"-"+i):n=n&&n*1>0?"001-001-"+n.padStart(9,"0"):"",n};var formatMoneyColumn=function(n,t){return n&&typeof n!="undefined"&&(t==="display"||t==="filter")?"$ "+(n*1).toFixed(2):"$ 0.00"},rangePickerOptions={locale:{format:"DD/MM/YYYY",separator:" - ",applyLabel:"OK",cancelLabel:"Cancelar",fromLabel:"Desde",toLabel:"Hasta",customRangeLabel:"Personalizar",weekLabel:"S",daysOfWeek:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],firstDay:1},opens:"right",format:"DD/MM/YYYY",separator:" hasta ",startDate:moment().subtract(29,"days"),endDate:moment(),ranges:{Hoy:[moment(),moment()],"Últimos 7 días":[moment().subtract(6,"days"),moment()],"Últimos 30 días":[moment().subtract(29,"days"),moment()],"Este Mes":[moment().startOf("month"),moment().endOf("month")],"Mes Anterior":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Este Año":[moment().startOf("year"),moment().endOf("year")],"Año Anterior":[moment().subtract(1,"year").startOf("year"),moment().subtract(1,"year").endOf("year")]},minDate:"01/01/2000",maxDate:"31/12/2200"},createRangePicker=function(n,t,i,r){var u=Object.assign({},rangePickerOptions);i&&(u.startDate=i);r&&(u.endDate=r);$(n).daterangepicker(u,function(n,i){t(n,i)})},convertToMoment=function(n){if(typeof n=="string"&&n.includes("/")){var t=n.split("/"),i=t[0],r=t[1],u=t[2];return moment(u+"-"+r+"-"+i).locale("es")}return moment(n).locale("es")},convertToDate=function(n){if(typeof n=="string"){var t=n.split("/"),i=t[0],r=t[1],u=t[2];return new Date(Date.parse(u+"-"+r+"-"+i)*1.000011544)}return typeof n=="number"?new Date(parseInt(n)):new Date(n)},DTSpanish={sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"No existen registros disponibles en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Filtrar:",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}};$.fn.serializeJSON=function(){var n={},t=this.serializeArray();return $.each(t,function(){n[this.name]?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),n};$.fn.serializeJSONString=function(){var n={},t=this.serializeArray();return $.each(t,function(){n[this.name]?(n[this.name].push||(n[this.name]=[n[this.name]]),n[this.name].push(this.value||"")):n[this.name]=this.value||""}),JSON.stringify(n)};var datePickerOptions={format:"dd/mm/yyyy",language:"es",autoclose:!0,orientation:"bottom"},showLoader=function(n){typeof n=="string"?$("#loaderV1Text").html(n):$("#loaderV1Text").html("");$(".loaderV1").fadeIn()},hideLoader=function(){$(".loaderV1").fadeOut()};window.showModal=function(n,t,i){t||(t={});i||(i="#myModal");$div=$(i);showLoader();$.get(n,t,function(n){n.includes("kt_login")?window.open(location.origin+"/auth","_login"):(n.includes("modal-dialog")||(n='<div class="modal-dialog" style="max-width:90%" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<\/span><\/button><\/div> <div class="modal-body">'+n+"<\/div><\/div><\/div>"),$div.html(n),$div.fadeIn(),$div.modal("show"));hideLoader()}).always(function(){hideLoader()})};var hideModal=function(n){n||(n="#myModal");$div=$(n);$div.fadeOut();$div.empty();$div.modal("hide")},getValueSafe=function(n,t){var i,r;if(t=t*1,(isNaN(t)||t<0||t>6)&&(t=6),i=0,typeof n=="object"&&(typeof n.value=="string"||typeof n.value=="number"?n=n.value:typeof n.val!="undefined"&&(n=n.val())),typeof n=="number")i=n;else if(typeof n!="undefined"&&(n=n.toString(),typeof n=="string")){if(n.lastIndexOf(".")>0)while(n.lastIndexOf(",")>0)n=n.replace(",","");n=n.split(",").length>2?n.replace(",",""):n.replace(",",".");r=n.match(/[-?\d\.]+/);i=parseFloat(r)}return isNaN(i)&&(i=0),i=i.toFixed(t),parseFloat(i)},fixUp=function(n){var t=n,i;return t&&(typeof t=="number"&&(t=t.toFixed(6)),t.endsWith(".000000")||t.endsWith(",000000")?t=t.substring(0,t.length-7):t.endsWith("0000")?(i=t.lastIndexOf("0000"),t=t.substring(0,i)):t.endsWith("00")&&(i=t.lastIndexOf("00"),t=t.substring(0,i))),t},setValueSafe=function(n,t,i){typeof n!="undefined"&&(typeof n[0]!="undefined"&&n[0]!==null&&(n=n[0]),typeof t=="number"&&(t=i?t.toLocaleString("en-US",{style:"currency",currency:"USD"}):t.toFixed(2).toLocaleString("en-US")),n.value=t,$(n).trigger("change"))};$.fn.upperText=function(){$(this).on("change keyup keydown",function(){var t=$(this),n;t.prop("type")!="hidden"&&(n=t.val(),n&&(n.includes("@")?t.val(n.toLowerCase()):t.val(n.toUpperCase())))})};$.fn.totalText=function(){$(this).on("change keyup keydown",function(){var n=$(this),t=n.val(),i=n.attr("name");$("[data-field='"+i+"']").text(t)})};$(document).ready(function(){history.forward();$(".upper-text").upperText();typeof $.fn.selectpicker!="undefined"&&$(".bs-select").selectpicker({iconBase:"fa",tickIcon:"fa-check"});typeof $.fn.datepicker!="undefined"&&($(".date-picker").datepicker({format:"dd/mm/yyyy",language:"es",autoclose:!0}),$(".datepicker").datepicker(datePickerOptions),$(".date-picker").datepicker(datePickerOptions));$(".sidebar-search input").on("keyup",function(){var n=$(this).val().toLowerCase();$(".nav-item li").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(n)>-1)})});var n=$(".refresh");if(n)n.on("click",function(){refreshMethod()});if(typeof $.fn.daterangepicker!="undefined"&&$(".range-date-picker").daterangepicker(rangePickerOptions,function(n,t){if($(".range-date-picker span").html(n.format("DD/MMMM/YYYY")+" - "+t.format("DD/MMMM/YYYY")),rangefunctions)for(var i=0;i<rangefunctions.length;i++)rangefunctions[i](n,t)}),$.fn.counterUp&&$(".counter").counterUp({delay:10,time:1e3}),toastr&&(toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!0,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}),searchMethod&&($(".search-form a").length>0&&($(".search-form a").onclick=function(){var n=$(".search-form input").val();searchMethod(n)}),$("form.search-form").length>0))$("form.search-form").on("submit",function(n){var t=$(".search-form input").val();n.preventDefault();searchMethod(t)});$('[type="checkbox"]').on("click",function(){var n=$(this),t=n.is(":checked"),i=n.attr("name");$("input[name='"+i+"']").val(t)});$(".sidebar-search input").on("keyup",function(){var n=$(this).val().toLowerCase();$(".nav-item li").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(n)>-1)})});$("input[type='number']").each(function(n,t){var i=$(t);i.prop("maxlength")>0&&(t.onkeypress=function(){var n=$(this).prop("maxlength");if(n&&this.value.length>=n)return!1})});$(".kt-grid-nav__item").tooltip();$(".invoice-subtotal").totalText()});