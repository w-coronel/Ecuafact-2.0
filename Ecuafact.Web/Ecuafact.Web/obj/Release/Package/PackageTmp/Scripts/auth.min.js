var Login=function(){var n,i,r,u,f=function(){var n=$(".login-form"),t;return n.valid()&&(lockForm(!0),t=n.serializeJSON(),$.ajax({url:Login.LoginUrl,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),success:function(n){n.id==1?(toastr.success(n.message||"Usuario Autenticado!"),location=n.url):(lockForm(!1),n&&toastr.error(n.description||n.Message||n.message))},error:function(n){if(lockForm(!1),n)if(n.description)toastr.error(n.description);else if(n.Message)toastr.error(n.Message);else if(n.message)toastr.error(n.message);else if(n.responseText){var t=n.responseText;t.length>100&&(t=t.substring(t.indexOf("<title>")+7,t.indexOf("<\/title>")));toastr.error(t)}}})),!1},e=function(){$("#loginButton").on("click",f);$(".login-form").on("submit",function(n){return n.preventDefault(),!1});$(".rememberMe").on("change",function(){var n=$(".rememberMe")[0];$("#RememberMe").val(n.checked)});$(".login-form").validate({rules:{Username:{required:!0,minlength:10,digits:!0},Password:{required:!0},RememberMe:{required:!1}},messages:{Username:{required:"Ingrese el Numero de Identificación de su cuenta.",minlength:"Debe ingresar al menos 10 numeros",digits:"Debe ingresar solo numeros"},Password:{required:"Ingrese el Password de su cuenta."}}});$(".login-form input").keypress(function(n){if(n.which==13)return $(".login-form").validate().form()&&f(),!1})},o=function(){var n=$(".forget-form");n.on("submit",function(n){if(!$(n.target).valid())return n.preventDefault(),hideLoader(),!1;showLoader()});n.validate({rules:{email:{required:!0,email:!0},id:{required:!0,minlength:10,digits:!0}},messages:{email:{required:"Email es obligatorio.",email:"Se requiere un email v&aacute;lido"},id:{required:"El Numero de identificacion del usuario es obligatorio",minlength:"No. Identificacion debe contener al menos 10 digitos",digits:"El numero de identificacion debe contener solo numeros"}},submitHandler:function(n){n.submit()}});$(".forget-form input").keypress(function(n){if(n.which==13)return $(".forget-form").validate().form()&&$(".forget-form").submit(),!1})},h=function(){$(".register-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{Name:{required:!0,minlength:6,onlyWords:!0},Email:{required:!0,email:!0},User:{required:!0,minlength:10,maxlength:13,identification:!0,digits:!0},Password:{required:!0,minlength:4},Dependents:{digits:!0},checkme:{required:!0}},messages:{Name:{required:"El nombre completo del usuario es obligatorio",minlength:"El campo nombre debe contener por lo menos 6 caracteres",onlyWords:"El campo Nombre debe contener por lo menos 2 palabras"},Email:{required:"El correo electronico del usuario es obligatorio",email:"Por favor escriba un correo electronico v&aacute;lido"},User:{required:"El Numero de identificacion del usuario es obligatorio",minlength:"No. Identificacion debe contener al menos 10 caracteres numericos",maxlength:"No. Identificacion puede contener hasta 13 caracteres numericos",digits:"El numero de identificacion debe contener solo numeros"},Dependents:{digits:"Debe ingresar el numero de integrantes del hogar"},Password:{required:"La clave del usuario es obligatoria",minlength:"Su contraseña debe contener al menos 8 caracteres"},checkme:{required:"Debe aceptar los terminos y condiciones para continuar!"}},submitHandler:function(n){n.submit()}});$(".register-form input").keypress(function(n){if(n.which==13)return $(".register-form").validate().form()&&$(".register-form").submit(),!1});$(".register-form").submit(function(n){return $("input#checkme").is(":checked")?$(".register-form").valid()?(showLoader(),!0):(toastr.error("Debe completar los datos de la cuenta!"),n.preventDefault(),!1):(toastr.warning("Debe aceptar los terminos y condiciones para continuar!"),n.preventDefault(),!1)});$(".register-user").on("change",c);t=Login.Authorization;s=Login.Servet;n=s.lastIndexOf("/")+1;u=s.substring(0,n);r=s.substring(n);i=u+"feature/"+t},c=function(){var n=$(this).val();n&&(n.length==10||n.length==13)&&($("#user_icon")[0].className="fas fa-sync fa-spin",$.ajax({url:i,type:"post",headers:{uid:r,usn:n}}).done(function(n){n&&n.length>0&&n.length<500&&$("#register_name").val(n);$("#user_icon")[0].className="fa fa-credit-card"}).always(function(){$("#user_icon")[0].className="fa fa-credit-card"}))},l=function(){$(".password-form").show();$(".password-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:!1,ignore:"",rules:{UniqueId:{required:!0},NewPassword:{required:!0,minlength:4},NewPassword2:{required:!0,minlength:4,equalTo:"#new_password"}},messages:{UniqueId:{required:"La solicitud actual ya no es válida."},NewPassword:{required:"La clave del usuario es obligatoria",minlength:"Su contraseña debe contener al menos 8 caracteres"},NewPassword2:{required:"Debe confirmar su clave",minlength:"Su contraseña debe contener al menos 8 caracteres",equalTo:"La clave ingresada no coincide"}},submitHandler:function(n){n.submit()}});$(".register-form input").keypress(function(n){if(n.which==13)return $(".register-form").validate().form()&&$(".register-form").submit(),!1})};return{LoginUrl:"",Servet:"",Authorization:"",InitLogin:function(){e()},InitRegister:function(){h()},InitForget:function(){o()},initPassword:function(){l()}}}();jQuery.validator.addMethod("identification",function(n,t){return this.optional(t)||n&&(validarCedula(n)||n.length==13&&n.endsWith("001"))},"Debe ser un numero de identidad válido");